<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Industrial Cluster Map - India</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css">

  <style>
    body, html { margin: 0; padding: 0; height: 100%; }
    #map { height: 100%; }
    .legend {
      background: rgba(255,255,255,0.9);
      padding: 8px;
      border-radius: 6px;
      line-height: 1.5;
      font-size: 14px;
    }
  </style>
</head>
<body>

<div id="map"></div>

<script>
// ---------------- MAP BASE SETUP ----------------
var map = L.map('map').setView([20.5937, 78.9629], 5);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 18
}).addTo(map);

// ---------------- STATE GEOJSON (highlight) ----------------
async function highlightState(stateName, color) {
  const response = await fetch("https://raw.githubusercontent.com/geohacker/india/master/state/india_telengana.geojson"
    .replace("telengana", stateName.toLowerCase().replace(/ /g, "_")));
  
  if (!response.ok) return;

  const geo = await response.json();

  L.geoJSON(geo, {
    style: {
      color: color,
      weight: 2,
      fillOpacity: 0.15
    }
  }).addTo(map);
}

// highlight major industrial states
highlightState("maharashtra", "#ff7f00");
highlightState("himachal_pradesh", "#008cff");
highlightState("haryana", "#00b34a");
highlightState("tamil_nadu", "#9b59b6");

// ---------------- CLUSTER MARKERS ----------------
var markers = L.markerClusterGroup();

const clusterPoints = [
  { name: "Kolhapur", state: "Maharashtra", lat: 16.7050, lng: 74.2433 },
  { name: "Pune", state: "Maharashtra", lat: 18.5204, lng: 73.8567 },
  { name: "Gurugram", state: "Haryana", lat: 28.4595, lng: 77.0266 },
  { name: "Baddi Industrial Area", state: "Himachal Pradesh", lat: 30.9578, lng: 76.7914 },
  { name: "Coimbatore", state: "Tamil Nadu", lat: 11.0168, lng: 76.9558 }
];

clusterPoints.forEach(pt => {
  var marker = L.circleMarker([pt.lat, pt.lng], {
    radius: 9,
    fillColor: "#e63946",
    color: "#b30000",
    weight: 2,
    fillOpacity: 0.8
  }).bindPopup(
    `<b>${pt.name}</b><br>
     <b>State:</b> ${pt.state}<br>
     <b>Industrial Cluster Highlighted</b>`
  );
  markers.addLayer(marker);
});

map.addLayer(markers);

// ---------------- LEGEND ----------------
var legend = L.control({position: "bottomleft"});
legend.onAdd = function() {
  var div = L.DomUtil.create("div", "legend");
  div.innerHTML = `
    <b>Industrial Cluster Highlights</b><br>
    ● Kolhapur, Maharashtra <br>
    ● Pune, Maharashtra <br>
    ● Gurugram, Haryana <br>
    ● Baddi, Himachal Pradesh <br>
    ● Coimbatore, Tamil Nadu <br><br>
    Highlighted states are outlined on the map.
  `;
  return div;
};
legend.addTo(map);
</script>

</body>
</html>
